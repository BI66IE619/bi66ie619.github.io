<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Unblockedcord</title>
  <script type='text/javascript' src='https://cdn.scaledrone.com/scaledrone.min.js'></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { display: flex; height: 100vh; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #36393F; color: white; overflow: hidden; }
    .server-sidebar { width: 72px; background-color: #1f1e23; padding: 12px 8px; display: flex; flex-direction: column; align-items: center; gap: 8px; }
    .server-icon { width: 48px; height: 48px; background-color: #5865F2; border-radius: 24px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: border-radius 0.2s ease; position: relative; }
    .server-icon:hover { border-radius: 16px; }
    .server-icon img { width: 28px; height: 28px; border-radius: 50%; }
    .separator { width: 32px; height: 2px; background-color: #4F545C; border-radius: 1px; margin: 4px 0; }
    .nav-icon { width: 48px; height: 48px; background-color: #36393F; border-radius: 24px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; }
    .nav-icon:hover { background-color: #5865F2; border-radius: 16px; }
    .nav-icon img { width: 20px; height: 20px; filter: invert(1); }
    .channel-sidebar { width: 240px; background-color: #2c2d31; display: flex; flex-direction: column; }
    .server-header { height: 48px; padding: 0 16px; display: flex; align-items: center; border-bottom: 1px solid #1e1f22; font-weight: 600; cursor: pointer; }
    .server-header:hover { background-color: #35373C; }
    .channels-container { flex: 1; padding: 16px 8px; overflow-y: auto; }
    .channel-category { display: flex; align-items: center; justify-content: space-between; padding: 16px 8px 4px 8px; font-size: 12px; font-weight: 600; color: #96989D; text-transform: uppercase; letter-spacing: 0.02em; }
    .channel-item { display: flex; align-items: center; padding: 6px 8px; margin: 1px 0; border-radius: 4px; cursor: pointer; color: #96989D; transition: all 0.15s ease; }
    .channel-item:hover { background-color: #35373C; color: #DCDDDE; }
    .channel-item.active { background-color: #404249; color: white; }
    .channel-item::before { content: '#'; margin-right: 6px; font-weight: 300; }
    .user-info { height: 52px; background-color: #232428; padding: 8px; display: flex; align-items: center; gap: 8px; }
    .user-avatar { width: 32px; height: 32px; border-radius: 50%; background-color: #5865F2; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; }
    .user-details { flex: 1; min-width: 0; }
    .user-name { font-size: 14px; font-weight: 600; color: white; line-height: 18px; }
    .user-status { font-size: 12px; color: #96989D; line-height: 16px; }
    .chat-container { flex: 1; background-color: #36393F; display: flex; flex-direction: column; }
    .chat-header { height: 48px; padding: 0 16px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #1e1f22; gap: 8px; }
    .chat-header-left { display: flex; align-items: center; gap: 8px; }
    .chat-header-right { font-size: 14px; color: #96989D; }
    .chat-header::before { content: '#'; color: #96989D; font-weight: 300; }
    .channel-name { font-weight: 600; color: white; }
    .messages-container { flex: 1; overflow-y: auto; padding: 16px; display: flex; flex-direction: column; gap: 4px; }
    .message { display: flex; gap: 16px; padding: 2px 0; margin: 4px 0; border-radius: 4px; transition: background-color 0.1s ease; }
    .message:hover { background-color: #32353B; }
    .message-avatar { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 16px; flex-shrink: 0; margin-top: 2px; }
    .message-content { flex: 1; min-width: 0; }
    .message-header { display: flex; align-items: baseline; gap: 8px; margin-bottom: 2px; }
    .message-author { font-weight: 500; font-size: 16px; cursor: pointer; }
    .message-author:hover { text-decoration: underline; }
    .message-timestamp { font-size: 12px; color: #96989D; font-weight: 500; }
    .message-text { font-size: 16px; line-height: 22px; color: #DCDDDE; word-wrap: break-word; }
    .message-input-container { padding: 16px; }
    .message-form { background-color: #40444B; border-radius: 8px; padding: 11px 16px; display: flex; align-items: center; gap: 12px; }
    .message-input { flex: 1; background: transparent; border: none; color: white; font-size: 16px; line-height: 22px; resize: none; outline: none; }
    .message-input::placeholder { color: #96989D; }
    .send-button { background-color: #5865F2; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 14px; font-weight: 500; cursor: pointer; transition: background-color 0.15s ease; }
    .send-button:hover { background-color: #4752C4; }
    .send-button:disabled { background-color: #36393F; cursor: not-allowed; opacity: 0.5; }
    .members-sidebar { width: 240px; background-color: #2c2d31; display: flex; flex-direction: column; border-left: 1px solid #1e1f22; }
    .members-header { height: 48px; padding: 0 16px; display: flex; align-items: center; border-bottom: 1px solid #1e1f22; font-weight: 600; color: white; }
    .members-content { flex: 1; overflow-y: auto; padding: 16px 8px; }
    .members-section { margin-bottom: 24px; }
    .members-section-title { font-size: 12px; font-weight: 600; color: #96989D; text-transform: uppercase; letter-spacing: 0.02em; margin-bottom: 8px; padding: 0 8px; }
    .member-item { display: flex; align-items: center; padding: 2px 8px; margin: 1px 0; border-radius: 4px; cursor: pointer; transition: background-color 0.15s ease; }
    .member-item:hover { background-color: #35373C; }
    .member-avatar { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; margin-right: 12px; position: relative; }
    .member-avatar::after { content: ''; position: absolute; bottom: -2px; right: -2px; width: 12px; height: 12px; background-color: #3ba55c; border: 3px solid #2c2d31; border-radius: 50%; }
    .member-info { flex: 1; min-width: 0; }
    .member-name { font-size: 14px; font-weight: 500; color: white; line-height: 18px; }
    .member-status { font-size: 12px; color: #96989D; line-height: 16px; }
    .members-info { font-size: 12px; color: #96989D; margin-bottom: 8px; padding: 0 8px; }
    .members-list { max-height: 200px; overflow-y: auto; padding: 0 8px; }
    .member { padding: 2px 0; font-size: 14px; font-weight: 500; }
    @media (max-width: 1024px) { .members-sidebar { display: none; } .channel-members { display: block; } }
    @media (min-width: 1025px) { .channel-members { display: none; } .members-sidebar { display: flex; } }
    @media (max-width: 768px) { .server-sidebar { width: 60px; padding: 8px 4px; } .server-icon, .nav-icon { width: 40px; height: 40px; } .channel-sidebar { width: 200px; } .message-form { padding: 8px 12px; } .message-input { font-size: 14px; } }
    @media (max-width: 480px) { .server-sidebar { width: 50px; padding: 6px 2px; } .server-icon, .nav-icon { width: 36px; height: 36px; } .channel-sidebar { width: 180px; } .chat-header { padding: 0 12px; } .messages-container { padding: 12px; } .message-input-container { padding: 12px; } }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background-color: #1a1a1a; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background-color: #2a2a2a; }
    .connection-status { position: fixed; top: 10px; right: 10px; padding: 8px 12px; border-radius: 4px; font-size: 12px; font-weight: 500; z-index: 1000; }
    .connection-status.connected { background-color: #3ba55c; color: white; }
    .connection-status.disconnected { background-color: #ed4245; color: white; }
  </style>
</head>
<body>

<!-- Connection Status -->
<div id="connectionStatus" class="connection-status disconnected">Connecting...</div>

<!-- Server Sidebar -->
<div class="server-sidebar">
  <a href="index.html" class="server-icon" title="Home">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/discord-logo.png" alt="Discord Logo"/>
  </a>
  <div class="separator"></div>
  <a href="main.html" class="nav-icon" title="Home">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/home.png" alt="Home">
  </a>
  <a href="g.html" class="nav-icon" title="Games">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/controller.png" alt="Games">
  </a>
  <a href="a.html" class="nav-icon" title="Apps">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/app-store.png" alt="Apps">
  </a>
  <a href="e.html" class="nav-icon" title="Exploits">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/hacker.png" alt="Exploits">
  </a>
  <a href="s.html" class="nav-icon" title="Settings">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/settings.png" alt="Settings">
  </a>
  <a href="disremake.html" class="nav-icon" title="Chat">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/chat.png" alt="Chat">
  </a>
</div>

<!-- Channel Sidebar -->
<div class="channel-sidebar">
  <div class="server-header">Unblockedcord</div>
  <div class="channels-container">
    <div class="channel-category"><span>Text Channels</span><span>+</span></div>
    <div class="channel-item active">general</div>
    <div class="channel-item">random</div>
    <div class="channel-item">memes</div>
    <div class="channel-members">
      <div class="members-info"><span class="members-count">0 users in room:</span></div>
      <div class="members-list"></div>
    </div>
  </div>
  <div class="user-info">
    <div class="user-avatar" id="userAvatar">U</div>
    <div class="user-details">
      <div class="user-name" id="userName">Connecting...</div>
      <div class="user-status" id="userStatus">Offline</div>
    </div>
  </div>
</div>

<!-- Chat Container -->
<div class="chat-container">
  <div class="chat-header">
    <div class="chat-header-left"><span class="channel-name">general</span></div>
    <div class="chat-header-right"><span class="members-count-header">0 members</span></div>
  </div>
  <div class="messages-container messages"></div>
  <div class="message-input-container">
    <form class="message-form" onsubmit="return false;">
      <input id="messageInput" class="message-input message-form__input" placeholder="Type a message..." type="text"/>
      <button class="send-button message-form__button" type="submit" disabled>Send</button>
    </form>
  </div>
</div>

<!-- Members Sidebar -->
<div class="members-sidebar">
  <div class="members-header"><span>Members — <span class="members-count-sidebar">0</span></span></div>
  <div class="members-content">
    <div class="members-section">
      <div class="members-section-title">Online — <span class="online-count">0</span></div>
      <div class="members-list-sidebar"></div>
    </div>
  </div>
</div>

<!-- Update Log Pop-up -->
<div id="updateLogPopup" style="
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%) translateY(120%);
  background-color: #2c2d31;
  color: #fff;
  padding: 16px 24px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  max-width: 320px;
  font-size: 14px;
  text-align: left;
  opacity: 0;
  transition: transform 0.5s ease, opacity 0.5s ease;
  z-index: 10000;
">
  <div style="display: flex; justify-content: space-between; align-items: center;">
    <strong>Update Log v1.0</strong>
    <button id="closeUpdatePopup" style="
      background: none;
      border: none;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
      font-weight: bold;
    ">✖</button>
  </div>
  <ul style="margin-top: 8px; padding-left: 16px;">
    <li>Added multi-channel chat support</li>
    <li>Saved chat history per room</li>
    <li>Owner unlock hidden area</li>
    <li>Improved members sidebar</li>
    <li>Pop-up update log implemented</li>
  </ul>
</div>

<script>
// Full JS logic for chat, owner unlock, localStorage, channels, Scaledrone
const CLIENT_ID = 'hWmT5ZuGe51IgiMD';
const OWNER_AREA = { right: 2, bottom: 2, width: 8, height: 8 };
const OWNER_REQUIRED_CLICKS = 20;
const OWNER_STORAGE_KEY = 'jerichoOwnerUnlocked';
const CHAT_STORAGE_KEY_BASE = 'unblockedcord_chat_history';

let currentRoomName = 'general';
let drone = null;
let currentRoom = null;
let members = [];
let currentUser = null;

const DOM = {
  messages: document.querySelector('.messages'),
  input: document.querySelector('#messageInput'),
  form: document.querySelector('.message-form'),
  sendButton: document.querySelector('.message-form__button'),
  connectionStatus: document.getElementById('connectionStatus'),
  userName: document.getElementById('userName'),
  userStatus: document.getElementById('userStatus'),
  userAvatar: document.getElementById('userAvatar'),
  channelItems: document.querySelectorAll('.channel-item'),
  channelName: document.querySelector('.channel-name'),
  membersList: document.querySelector('.members-list'),
  membersCountHeader: document.querySelector('.members-count-header'),
  membersListSidebar: document.querySelector('.members-list-sidebar'),
  membersCountSidebar: document.querySelector('.members-count-sidebar'),
  updateLogPopup: document.getElementById('updateLogPopup'),
  closeUpdatePopup: document.getElementById('closeUpdatePopup'),
};

function showUpdatePopup() {
  if (!sessionStorage.getItem('updateLogSeen')) {
    DOM.updateLogPopup.style.transform = 'translateX(-50%) translateY(0)';
    DOM.updateLogPopup.style.opacity = '1';
  }
}
function closeUpdatePopup() {
  DOM.updateLogPopup.style.transform = 'translateX(-50%) translateY(120%)';
  DOM.updateLogPopup.style.opacity = '0';
  sessionStorage.setItem('updateLogSeen', 'true');
}
DOM.closeUpdatePopup.addEventListener('click', closeUpdatePopup);

// Owner unlock hidden area (easter egg)
let ownerClicks = 0;
document.body.addEventListener('click', (e) => {
  if (!localStorage.getItem(OWNER_STORAGE_KEY)) {
    ownerClicks++;
    if (ownerClicks >= OWNER_REQUIRED_CLICKS) {
      alert('Owner area unlocked!');
      localStorage.setItem(OWNER_STORAGE_KEY, 'true');
    }
  }
});

// Random username
currentUser = { name: 'User' + Math.floor(Math.random() * 1000), avatar: null };
DOM.userName.textContent = currentUser.name;

// Channel switching
DOM.channelItems.forEach((item) => {
  item.addEventListener('click', () => {
    DOM.channelItems.forEach(c => c.classList.remove('active'));
    item.classList.add('active');
    currentRoomName = item.textContent;
    DOM.channelName.textContent = currentRoomName;
    loadChatHistory();
  });
});

// LocalStorage chat history
function saveMessage(message) {
  const key = CHAT_STORAGE_KEY_BASE + '_' + currentRoomName;
  let history = JSON.parse(localStorage.getItem(key) || '[]');
  history.push(message);
  localStorage.setItem(key, JSON.stringify(history));
}

function loadChatHistory() {
  const key = CHAT_STORAGE_KEY_BASE + '_' + currentRoomName;
  const history = JSON.parse(localStorage.getItem(key) || '[]');
  DOM.messages.innerHTML = '';
  history.forEach(addMessageToDOM);
}

// Add message to DOM
function addMessageToDOM({ user, text, timestamp }) {
  const msg = document.createElement('div');
  msg.className = 'message';
  msg.innerHTML = `
    <div class="message-avatar">${user.name.charAt(0)}</div>
    <div class="message-content">
      <div class="message-header">
        <span class="message-author">${user.name}</span>
        <span class="message-timestamp">${new Date(timestamp).toLocaleTimeString()}</span>
      </div>
      <div class="message-text">${text}</div>
    </div>
  `;
  DOM.messages.appendChild(msg);
  DOM.messages.scrollTop = DOM.messages.scrollHeight;
}

// Send message
DOM.form.addEventListener('submit', (e) => {
  e.preventDefault();
  const text = DOM.input.value.trim();
  if (!text) return;
  const message = { user: currentUser, text, timestamp: Date.now() };
  addMessageToDOM(message);
  saveMessage(message);
  DOM.input.value = '';
});
DOM.input.addEventListener('input', () => {
  DOM.sendButton.disabled = !DOM.input.value.trim();
});

// Show pop-up log
showUpdatePopup();

// Initial load
loadChatHistory();
</script>
</body>
</html>
